language: python
python:
  - "2.6"
  - "2.7"
  - "3.2"
  - "3.3"
  - "3.4"
  - "3.5"

# command to install dependencies
install:
  - export PYTHONVERSION=`python -c 'import sys;print("%s.%s"%(sys.version_info[0],sys.version_info[1]))'`
  - python -c 'import os;print("PYTHONVERSION=%s" % os.environ["PYTHONVERSION"])'
  - export PYTHONPATH=$HOME/.local/lib/python${PYTHONVERSION}/site-packages:$PYTHONPATH
  - python -c 'import os;print("PYTHONPATH=%s" % os.environ["PYTHONPATH"])'
  - pwd
  - ls -al `pwd`/*
  - pip install travis-sphinx
  - "python ./setup.py install"
 
# command to run tests
script:
    - cd docs
    - python -m array_split.tests
    - cd ..
    - if [[ $TRAVIS_PYTHON_VERSION != '3.2'* ]]; then travis-sphinx build; fi

after_success:
     # Can only build docs with sphinx for python 2.6, 2.7, 3.3, 3.4, ...
    - if [[ $TRAVIS_PYTHON_VERSION != '3.2'* ]]; then travis-sphinx --branches=dev deploy; fi

